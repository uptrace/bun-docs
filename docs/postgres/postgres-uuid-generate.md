---
title: 'PostgreSQL: Generate UUID Primary Keys'
description: UUID is a 128-bit identifier used to uniquely identify information in computer systems and applications.
keywords:
  - postgresql generate uuid
  - postgres uuid primary key
  - postgres uuid generate
  - golang postgres uuid
---

<UptraceCta />

# PostgreSQL: Generating UUID primary keys

A universally unique identifier (UUID) is a 128-bit number that is generated in a way that makes it very unlikely that the same identifier will be generated by anyone else in the known universe (globally unique).

In PostgreSQL, you can generate UUIDs using the `uuid_generate_v4` function from the `uuid-ossp` extension.

![Postgres UUID primary key](/postgres-uuid-generate/cover.png)

[[toc]]

## What is UUID?

UUID stands for Universally Unique Identifier. It is a 128-bit identifier used to uniquely identify information in computer systems and applications. UUIDs are often represented as a string of 36 characters, typically in a format such as "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx", where each "x" represents a hexadecimal digit.

The purpose of UUIDs is to provide a way to generate identifiers that are highly unlikely to collide with other identifiers, even if they are created on different systems or at different times. This makes UUIDs particularly useful in scenarios where there is a need to uniquely identify objects, entities, or resources in distributed systems, databases, or other applications.

## When to use UUIDs?

You can use UUIDs when you need to generate a globally unique indentifier without using an id generation service, for example, [OpenTelemetry](https://uptrace.dev/opentelemetry) uses 16-bytes identifiers as a trace id.

Usually, UUIDs are generated by taking 16 random bytes and the uniqueness is based on the sheer quantity, not the generation algorithm. Such identifiers are proven to be unique, but are larger and slightly slower than 64-bit sequential numbers.

<!-- prettier-ignore -->
::: tip
UUIDs are slightly slower than 64-bit sequential identifiers. Use them only when you don't have an easy way to generate smaller sequential identifiers.
:::

## UUID in PostgreSQL

PostgreSQL requires an extension to support UUID column type. The extenstion comes with `postgresql-contrib-*` package:

```shell
sudo apt install postgresql-contrib-14
```

Then you need to install the extension in each database where you are going to use it:

```sql
CREATE EXTENSION IF NOT EXISTS "uuid-ossp";
```

## UUID in Go

For working with UUIDs in Go you need to install [google/uuid](https://pkg.go.dev/github.com/google/uuid) package.

```shell
go get github.com/google/uuid
```

[satori/go.uuid](https://github.com/satori/go.uuid) works too, but it does not look maintained any more.

## Generating UUIDs

In PostgreSQL:

```sql
SELECT uuid_generate_v4();
```

In Go:

```go
import "github.com/google/uuid"

fmt.Println(uuid.New())
```

## Using UUIDs in models

You can use `uuid.UUID` type in Bun [models](../guide/models.md) like this:

```go
import "github.com/google/uuid"

type Story struct {
	ID       uuid.UUID `bun:"type:uuid,default:uuid_generate_v4()"`
	Title    string
	AuthorID uuid.UUID `bun:"type:uuid"`
}
```

`UUID` field name also works well:

```go
type Story struct {
	UUID       uuid.UUID `bun:",pk,type:uuid,default:uuid_generate_v4()"`
	Title      string
	AuthorUUID uuid.UUID `bun:"type:uuid"`
}
```

## Monitoring performance

To [monitor PostgreSQL](https://uptrace.dev/tools/postgresql-monitoring-tools), you can use [OpenTelemetry PostgreSQL](https://uptrace.dev/guides/opentelemetry-postgresql) receiver that comes with OpenTelemetry Collector.

[OpenTelemetry Collector](https://uptrace.dev/opentelemetry/collector) is a valuable component for monitoring applications and infrastructure in distributed environments. It enables efficient data collection, processing, and export to improve observability, troubleshooting, and performance of software systems.

Uptrace is an [open source APM](https://uptrace.dev/get/hosted/open-source-apm) for OpenTelemetry that supports distributed tracing, metrics, and logs. You can use it to monitor applications and troubleshoot issues.

![Uptrace Overview](/uptrace/home.png)

Uptrace comes with an intuitive query builder, rich dashboards, alerting rules, notifications, and integrations for most languages and frameworks.

Uptrace can process billions of spans and metrics on a single server and allows you to monitor your applications at 10x lower cost.

In just a few minutes, you can try Uptrace by visiting the [cloud demo](https://app.uptrace.dev/play) (no login required) or running it locally with [Docker](https://github.com/uptrace/uptrace/tree/master/example/docker). The source code is available on [GitHub](https://github.com/uptrace/uptrace).

- [Grafana alternatives](https://uptrace.dev/comparisons/grafana-alternatives)
- [DataDog competitors](https://uptrace.dev/blog/datadog-competitors)
